Notebook[{
Cell[" ", "TutorialColorBar",
 CellMargins->{{Inherited, Inherited}, {-5, 
   0}},ExpressionUUID->"1a7e137b-5af5-462d-a521-eac503c57159"],

Cell[TextData[{
 ButtonBox["GeneralRelativityTensors",
  BaseStyle->{"Link", "LinkTrail"},
  ButtonData->
   "paclet:GeneralRelativityTensors/guide/GeneralRelativityTensors"],
 StyleBox[" > ", "LinkTrailSeparator"],
 ButtonBox["Pattern matching with Tensors",
  BaseStyle->{"Link", "LinkTrail"},
  ButtonData->
   "paclet:GeneralRelativityTensors/tutorial/Pattern matching with Tensors"]
}], "LinkTrail",ExpressionUUID->"01415262-4980-4c8f-813b-a46752c6a18c"],

Cell[BoxData[GridBox[{
   {Cell["PATTERN MATCHING WITH TENSORS TUTORIAL", "PacletNameCell",
     ExpressionUUID->"61d2023a-665f-4457-927a-5a0ee995b34e"], Cell[TextData[{
     Cell[BoxData[
      ActionMenuBox[
       FrameBox["\<\"Related Tutorials \[RightGuillemet]\"\>",
        StripOnInput->False], {
       RowBox[{"Introduction", " ", "to", " ", "GeneralRelativityTensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Introduction to \
GeneralRelativityTensors"], 
       RowBox[{"Introduction", " ", "to", " ", "Tensor", " ", "Curves"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Introduction to Tensor \
Curves"], 
       RowBox[{
       "Manipulating", " ", "and", " ", "Differentiating", " ", "Tensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Manipulating and \
Differentiating Tensors"], 
       RowBox[{"Built", " ", "in", " ", "common", " ", "Tensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Built in common Tensors"], 
       RowBox[{"Caching", " ", "Tensor", " ", "values"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Caching Tensor values"], 
       RowBox[{"Examples", " ", "-", " ", 
        RowBox[{"Wave", " ", "equations"}]}]:>Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Examples - Wave equations"]},
       
       Appearance->None,
       MenuAppearance->Automatic]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "b41f3c64-9d12-429f-bf8d-bc4744e58183"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      ActionMenuBox[
       FrameBox["\<\"URL \[RightGuillemet]\"\>",
        StripOnInput->
         False], {"\<\"Go to GeneralRelativityTensors website\"\>":>
       FrontEndExecute[{
         NotebookLocate[{
           URL[None], None}]}], 
       Delimiter, "\<\"Go to wolfram Mathematica website\"\>":>
       FrontEndExecute[{
         NotebookLocate[{
           URL[
           "http://reference.wolfram.com/mathematica/guide/Mathematica.html"],
            None}]}]},
       Appearance->None,
       MenuAppearance->Automatic]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "83a7a104-c507-47ba-802e-11c564ea3539"]
    }], "AnchorBar",ExpressionUUID->"4f3c96f4-e703-4e3c-ac88-74448c73ba0f"]}
  }]], "AnchorBarGrid",ExpressionUUID->"550fab0a-0fa2-4c94-8005-9fff38af9ca0"],

Cell[CellGroupData[{

Cell["GeneralRelativityTensors - Pattern matching with Tensors", \
"Title",ExpressionUUID->"90464fe6-9128-4112-9b65-c1f45f1e5c96"],

Cell["\<\
Mathematica\[CloseCurlyQuote]s powerful pattern matching can be used with \
GeneralRelativityTensors to replace parts of Tensor expressions.\
\>", "Text",ExpressionUUID->"9779769d-2613-40b2-ac9d-ff9c4cecd604"],

Cell[BoxData[
 RowBox[{"<<", "GeneralRelativityTensors`"}]], "Input",
 CellLabel->"In[1]:=",ExpressionUUID->"8c8e94a1-34ad-4875-9ffd-87a1b5128c25"],

Cell[CellGroupData[{

Cell["Simple pattern matching of Tensors", \
"Section",ExpressionUUID->"61900ecb-60db-4783-a3cc-23cd5a60f439"],

Cell["\<\
One of Mathematica\[CloseCurlyQuote]s core strengths is its ability to use \
pattern matching to perform algebraic manipulation.\
\>", "Item",ExpressionUUID->"f556fad5-8125-4c51-9a85-669b4e3bfe5d"],

Cell["\<\
At the same time, a serious problems with most common tensor packages is the \
lack of support for patterns.\
\>", "Item",ExpressionUUID->"09957401-af21-4e4d-879a-93f165a5c942"],

Cell[CellGroupData[{

Cell["\<\
GeneralRelativityTensors creates tensors the Head Tensor, which we can easily \
match on\
\>", "Item",ExpressionUUID->"38bcfb6b-7ec0-47ba-b6d7-a16f4e16dfed"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"gS", "=", 
  RowBox[{"ToMetric", "[", "\"\<Schwarzschild\>\"", "]"}]}]], "Input",
 CellLabel->"In[2]:=",ExpressionUUID->"022d47ee-7de5-467c-afd4-0a36fe34913e"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[2]=",ExpressionUUID->"d3fa2a1e-e1d2-4d34-9443-156f9a6a8c7b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MatchQ", "[", 
  RowBox[{"gS", ",", "_Tensor"}], "]"}]], "Input",
 CellLabel->"In[3]:=",ExpressionUUID->"ac6e9bf8-fb19-4727-b00f-ebad949b2c70"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[3]=",ExpressionUUID->"2955a19c-af20-4267-ab06-88b4b36f4a89"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We can use normal pattern matching tricks to get information about Tensors\
\>", "Item",ExpressionUUID->"d7de2184-dba9-4c31-ba74-cb5378d396d0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "=", 
  RowBox[{"BianchiIdentities", "[", 
   RowBox[{"gS", ",", "2"}], "]"}]}]], "Input",
 CellLabel->"In[4]:=",ExpressionUUID->"543310cd-fa0c-41af-ace9-bdad7558a247"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Gamma]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[4]=",ExpressionUUID->"d160072b-5c13-4255-8d09-309e93192989"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{"t_Tensor", "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"Indices", "[", "t", "]"}], "]"}]}]}]], "Input",
 CellLabel->"In[5]:=",ExpressionUUID->"99f44c04-3840-44c8-a2cf-3831c7680c9e"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{"\<\"{-\[Gamma], -\[Alpha], -\[Beta]}\"\>", "-", 
    RowBox[{"\<\"{\[Delta], -\[Alpha], -\[Gamma]}\"\>", 
     " ", "\<\"{-\[Delta], -\[Beta]}\"\>"}], "-", 
    RowBox[{"\<\"{-\[Alpha], -\[Delta]}\"\>", 
     " ", "\<\"{\[Delta], -\[Beta], -\[Gamma]}\"\>"}]}], ")"}]}]], "Output",
 CellLabel->"Out[5]=",ExpressionUUID->"1762433b-8d51-4558-8ab0-8729d75de0c6"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Functions like MetricQ and CurveQ allow us to constrain patterns.\
\>", "Item",ExpressionUUID->"ac9061f1-53d9-460d-b74d-402d9cc56bf9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"t_Tensor", "?", "MetricQ"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"Indices", "[", "t", "]"}], "]"}]}]}]], "Input",
 CellLabel->"In[6]:=",ExpressionUUID->"9c64253e-b933-4d3a-baab-1513ad6ac8f7"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[6]=",ExpressionUUID->"ff8aac81-d46f-43e2-a7aa-fe0b6c6f954d"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Matching using TensorPattern", \
"Section",ExpressionUUID->"1b374451-0a54-4a16-9570-fbe26bcf6215"],

Cell[CellGroupData[{

Cell["\<\
GeneralRelativityTensors provides this support further pattern support \
through the function TensorPattern\
\>", "Item",ExpressionUUID->"aa817f6b-99e5-4639-880f-4b71568e7f7f"],

Cell[BoxData[GridBox[{
   {
    RowBox[{
     ButtonBox["TensorPattern",
      BaseStyle->"Link",
      ButtonData->"paclet:GeneralRelativityTensors/ref/TensorPattern"], "[", 
     RowBox[{
      StyleBox["t", "TI"], 
      StyleBox[",", "TI",
       FontSlant->"Plain"], 
      StyleBox["patInds",
       FontFamily->"Times",
       FontWeight->"Regular",
       FontSlant->"Italic"]}], "]"}], Cell[TextData[{
     "returns the Tensor ",
     StyleBox["t",
      FontFamily->"Times",
      FontWeight->"Regular",
      FontSlant->"Italic"],
     " with patterns for indices"
    }], "TableText",ExpressionUUID->"5473ef9b-a37d-47e3-aff2-262c6d9f6aa5"]}
  }]], "DefinitionBox",
 CellID->27847004,ExpressionUUID->"4b334d3d-57b4-4f01-96d8-1d5a45a93705"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
As a simple example, we can use TensorPattern to extract the indices from a \
Tensor.\
\>", "Item",ExpressionUUID->"707683af-2e19-460b-b5cd-97367687338d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"TensorPattern", "[", 
    RowBox[{"gS", ",", 
     RowBox[{"{", 
      RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[7]:=",ExpressionUUID->"f319488c-c139-4497-88d3-9e160b57ccf2"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[7]=",ExpressionUUID->"d1f8e1c6-4c74-4e8f-ade7-212b366e542b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Alternatively, TensorPattern can be called implicitly with DownValues.\
\>", "Item",ExpressionUUID->"c8b7191a-4189-4fea-98a3-b6700567edab"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"a_", ",", "b_"}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[8]:=",ExpressionUUID->"f56c9d17-e9bd-46df-abdc-f6af487112fa"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[8]=",ExpressionUUID->"41b1332c-7980-4195-a049-21f3190ab6ea"]
}, Open  ]]
}, Open  ]],

Cell["\<\
TensorPattern can be called with a Pattern as the first argument so it \
matches more general Tensors.\
\>", "Item",ExpressionUUID->"5f37b689-75b7-43b9-9f06-987c164ab950"],

Cell[CellGroupData[{

Cell["Here we match on all rank-2 Tensors.", \
"Item",ExpressionUUID->"e16b918e-139e-4462-bc65-89c47ffa734b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"TensorPattern", "[", 
    RowBox[{"_", ",", 
     RowBox[{"{", 
      RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[9]:=",ExpressionUUID->"7fb0a756-fd10-489d-82ca-4e7a541ff4fd"],

Cell[BoxData[
 TemplateBox[{
  "Condition","condp",
   "\"Pattern \\!\\(\\*RowBox[{\\\"a_\\\"}]\\) appears on the right-hand side \
of condition \\!\\(\\*RowBox[{RowBox[{\\\"{\\\", RowBox[{\\\"a_\\\", \
\\\",\\\", \\\"b_\\\"}], \\\"}\\\"}], \\\"/;\\\", \
RowBox[{RowBox[{\\\"MatchQ\\\", \\\"[\\\", RowBox[{RowBox[{\\\"{\\\", \
RowBox[{\\\"a_\\\", \\\",\\\", \\\"b_\\\"}], \\\"}\\\"}], \\\",\\\", RowBox[{\
\\\"{\\\", RowBox[{RowBox[{\\\"Alternatives\\\", \\\"@@\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`posIndPatterns\\\"}], \
\\\"..\\\"}], \\\"}\\\"}]}], \\\"]\\\"}], \\\"&&\\\", RowBox[{\\\"MatchQ\\\", \
\\\"[\\\", RowBox[{\\\"_\\\", \\\",\\\", RowBox[{RowBox[{\\\"Verbatim\\\", \\\
\"[\\\", \\\"_\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_\\\", \\\"|\\\", \
RowBox[{\\\"Verbatim\\\", \\\"[\\\", \\\"_Tensor\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_Tensor\\\"}]}], \
\\\"]\\\"}]}]}]\\).\"",2,9,2,20233810991004232477,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[9]:=",ExpressionUUID->"bec9d10d-b2bb-4eb8-8095-e0b2541b95a2"],

Cell[BoxData[
 TemplateBox[{
  "Condition","condp",
   "\"Pattern \\!\\(\\*RowBox[{\\\"b_\\\"}]\\) appears on the right-hand side \
of condition \\!\\(\\*RowBox[{RowBox[{\\\"{\\\", RowBox[{\\\"a_\\\", \
\\\",\\\", \\\"b_\\\"}], \\\"}\\\"}], \\\"/;\\\", \
RowBox[{RowBox[{\\\"MatchQ\\\", \\\"[\\\", RowBox[{RowBox[{\\\"{\\\", \
RowBox[{\\\"a_\\\", \\\",\\\", \\\"b_\\\"}], \\\"}\\\"}], \\\",\\\", RowBox[{\
\\\"{\\\", RowBox[{RowBox[{\\\"Alternatives\\\", \\\"@@\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`posIndPatterns\\\"}], \
\\\"..\\\"}], \\\"}\\\"}]}], \\\"]\\\"}], \\\"&&\\\", RowBox[{\\\"MatchQ\\\", \
\\\"[\\\", RowBox[{\\\"_\\\", \\\",\\\", RowBox[{RowBox[{\\\"Verbatim\\\", \\\
\"[\\\", \\\"_\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_\\\", \\\"|\\\", \
RowBox[{\\\"Verbatim\\\", \\\"[\\\", \\\"_Tensor\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_Tensor\\\"}]}], \
\\\"]\\\"}]}]}]\\).\"",2,9,3,20233810991004232477,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[9]:=",ExpressionUUID->"b7040da4-4e2f-4709-8369-1929c54e681b"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Gamma]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[9]=",ExpressionUUID->"b47a30c8-0296-4e28-b224-4ee7e3049bf5"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Details of pattern matching", \
"Section",ExpressionUUID->"01ead0f7-b136-418b-ae46-ed0a939381d5"],

Cell[CellGroupData[{

Cell["\<\
A Tensor Pattern is formatted slightly differently from normal Tensors\
\>", "Item",ExpressionUUID->"fc8abd5d-177a-4cb5-be8d-ad2f162f0b85"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TensorPattern", "[", 
  RowBox[{"gS", ",", 
   RowBox[{"{", 
    RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[10]:=",ExpressionUUID->"ab1f3780-c061-427a-adfe-e8e2184c8d04"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "", 
   RowBox[{"a_b", "_"}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[10]=",ExpressionUUID->"e5353f80-4a36-47b0-87ee-0eb1858d9c44"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Note that these index patterns appear as contravariant, but they will match \
indices in either position, because they are very general patterns.\
\>", "Item",ExpressionUUID->"dc9dc974-e82e-4203-b444-8f149c51f128"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"MatchQ", "[", 
  RowBox[{"\[Alpha]", ",", "a_"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatchQ", "[", 
  RowBox[{
   RowBox[{"-", "\[Alpha]"}], ",", "a_"}], "]"}]}], "Input",
 CellLabel->"In[11]:=",ExpressionUUID->"b9118431-9a11-4ef0-bd82-a5b1f6787d66"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[11]=",ExpressionUUID->"fe47b0b0-fe79-48ba-86e0-4d8aa1c9ce3e"],

Cell[BoxData["True"], "Output",
 CellLabel->
  "Out[12]=",ExpressionUUID->"87ef1e47-3b70-47a5-b7ad-6158c3b11517"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We can put a more stringent constraint on the indices, by using more \
restrictive patterns.\
\>", "Item",ExpressionUUID->"0ad0c43a-44fb-4896-9caf-6f525cba90f5"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"gS", "[", 
  RowBox[{"a_Symbol", ",", 
   RowBox[{"-", "b_Symbol"}]}], "]"}]], "Input",
 CellLabel->"In[13]:=",ExpressionUUID->"cc11931a-e8dd-4790-b8ca-8fec99d5826f"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", 
   RowBox[{"                ", "b_Symbol"}], 
   RowBox[{"a_Symbol", "                "}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[13]=",ExpressionUUID->"750701f5-b27c-49a6-8693-14052d7eb89c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expr", "=", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"\[Alpha]", ",", "\[Beta]"}], "]"}], 
   RowBox[{"gS", "[", 
    RowBox[{
     RowBox[{"-", "\[Gamma]"}], ",", 
     RowBox[{"-", "\[Delta]"}]}], "]"}], 
   RowBox[{"gS", "[", 
    RowBox[{"\[Mu]", ",", 
     RowBox[{"-", "\[Nu]"}]}], "]"}]}]}]], "Input",
 CellLabel->"In[14]:=",ExpressionUUID->"fdf2cb62-84ce-4c2b-8718-9053449aa0cd"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Beta]"],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", "\[Gamma]\[Delta]", ""],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", 
    RowBox[{"  ", "\[Nu]"}], 
    RowBox[{"\[Mu]", "  "}]],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[14]=",ExpressionUUID->"0643595e-7edc-4944-9a78-958d4b12dd46"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expr", "/.", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"a_Symbol", ",", 
     RowBox[{"-", "b_Symbol"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[15]:=",ExpressionUUID->"7a273f41-240f-4dcf-8e7e-09fa4d37fa2c"],

Cell[BoxData[
 RowBox[{"\<\"{\[Mu], \[Nu]}\"\>", " ", 
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Beta]"],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", "\[Gamma]\[Delta]", ""],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[15]=",ExpressionUUID->"297f8a86-9ee0-419d-b236-497537f7cda7"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Using pattern matching on larger expressions", \
"Section",ExpressionUUID->"97561dd6-a92d-4a88-a769-5372ba6d63cd"],

Cell[CellGroupData[{

Cell["The field strength for the Reissner-Nordstr\[ODoubleDot]m spacetime \
is:", "Item",ExpressionUUID->"1dce6a88-68ce-4213-bdf7-adf0ab8ee443"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"FRN", "=", 
  RowBox[{"FieldStrengthTensor", "[", "\"\<RN\>\"", "]"}]}]], "Input",
 CellLabel->"In[16]:=",ExpressionUUID->"70f16536-bee2-42dd-aaeb-4490ebb627f8"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["F", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->
  "Out[16]=",ExpressionUUID->"c2c74d4b-d55a-4406-ab7f-3a8820bdd3b3"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Its covariant derivative is:", \
"Item",ExpressionUUID->"ebe4a917-9a28-4e03-bd19-f5141e747c0b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "=", 
  RowBox[{"CovariantD", "[", 
   RowBox[{"FRN", ",", 
    RowBox[{"-", "\[Gamma]"}]}], "]"}]}]], "Input",
 CellLabel->"In[17]:=",ExpressionUUID->"32056c20-d273-4d96-bae7-a0a891f8d909"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"-", 
    TagBox[
     SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
     DisplayForm]}], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "-", 
  RowBox[{
   TagBox[
    SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Beta]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "+", 
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[17]=",ExpressionUUID->"d218106a-7c7b-405d-8873-80596397af0a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
The metric and Christoffel symbols associated with that derivative are:\
\>", "Item",ExpressionUUID->"43e53063-8147-4b52-8675-63e9a66957fa"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"gRN", "=", 
  RowBox[{"ToMetric", "[", "\"\<RN\>\"", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"chrRN", "=", 
  RowBox[{"ChristoffelSymbol", "[", "gRN", "]"}]}]}], "Input",
 CellLabel->"In[18]:=",ExpressionUUID->"12cece28-55b9-491f-8179-33a41f58c290"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[18]=",ExpressionUUID->"03807be2-a96f-4838-9122-805dff7a45bb"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["\[CapitalGamma]", 
   RowBox[{"  ", "\[Beta]\[Gamma]"}], 
   RowBox[{"\[Alpha]", "    "}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[19]=",ExpressionUUID->"e9a57e08-dca4-4c4a-9681-de3c8aa26c20"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Now we can use pattern matching to set some terms to zero.", \
"Item",ExpressionUUID->"56b98124-2e29-4379-b430-30891bdabe19"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "/.", 
  RowBox[{
   RowBox[{"chrRN", "[", "__", "]"}], "\[RuleDelayed]", "0"}]}]], "Input",
 CellLabel->"In[20]:=",ExpressionUUID->"061f36ac-d06f-4e32-a1a2-d1c165a028c5"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox[
   RowBox[{"(", 
    RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->
  "Out[20]=",ExpressionUUID->"f95ccca7-36b5-44bf-b846-82c0c7abb8aa"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Suppose we wish to replace the Christoffel symbols with an expression \
involving the metric.\
\>", "Item",ExpressionUUID->"d4255a94-6106-49f4-9128-7876d8e9a587"],

Cell[BoxData[
 RowBox[{
  RowBox[{"chrRNExpr", "[", 
   RowBox[{"a_", ",", 
    RowBox[{"-", "b_"}], ",", 
    RowBox[{"-", "c_"}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{"1", "/", "2"}], " ", 
   RowBox[{"gRN", "[", 
    RowBox[{"a", ",", "\[Mu]"}], "]"}], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "\[Mu]"}], ",", 
         RowBox[{"-", "b"}]}], "]"}], ",", 
       RowBox[{"-", "c"}]}], "]"}], "+", 
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "\[Mu]"}], ",", 
         RowBox[{"-", "c"}]}], "]"}], ",", 
       RowBox[{"-", "b"}]}], "]"}], "-", 
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "b"}], ",", 
         RowBox[{"-", "c"}]}], "]"}], ",", 
       RowBox[{"-", "\[Mu]"}]}], "]"}]}], ")"}]}]}]], "Input",
 CellLabel->"In[21]:=",ExpressionUUID->"4ede807f-8a31-4319-afcf-6c7024a948f6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"chrRNExpr", "[", 
  RowBox[{"\[Alpha]", ",", 
   RowBox[{"-", "\[Beta]"}], ",", 
   RowBox[{"-", "\[Gamma]"}]}], "]"}]], "Input",
 CellLabel->"In[22]:=",ExpressionUUID->"e37fb0db-c285-4ee5-b60c-bd66b3e0e638"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Mu]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Beta]\[Mu]\[Gamma]", ""],
     DisplayForm], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Beta]", ""],
     DisplayForm], "-", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Beta]\[Gamma]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->
  "Out[22]=",ExpressionUUID->"6138f128-adb7-48ba-81dc-5b1c1d6b985a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["We can replace one of the Christoffel symbol easily.", \
"Item",ExpressionUUID->"4115977f-0a04-4652-bb3e-1a9a084e3f7a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "/.", 
  RowBox[{
   RowBox[{"chrRN", "[", 
    RowBox[{"\[Delta]", ",", 
     RowBox[{"-", "\[Alpha]"}], ",", 
     RowBox[{"-", "\[Gamma]"}]}], "]"}], "->", 
   RowBox[{"chrRNExpr", "[", 
    RowBox[{"\[Delta]", ",", 
     RowBox[{"-", "\[Alpha]"}], ",", 
     RowBox[{"-", "\[Gamma]"}]}], "]"}]}]}]], "Input",
 CellLabel->"In[23]:=",ExpressionUUID->"6ef38aa9-f8e6-4c53-bd42-68628a2b69ff"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"-", 
    TagBox[
     SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
     DisplayForm]}], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Beta]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "+", 
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Alpha]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Alpha]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Alpha]\[Gamma]", ""],
      DisplayForm]}], ")"}]}]}]], "Output",
 CellLabel->
  "Out[23]=",ExpressionUUID->"3304122b-bff8-439f-b7e8-2153339d3a61"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["However, with patterns we can replace both symbols at once.", \
"Item",ExpressionUUID->"0219c1cd-3ce2-4fed-b72f-e24d0b257997"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN2", "=", 
  RowBox[{"derivFRN", "/.", 
   RowBox[{
    RowBox[{"chrRN", "[", 
     RowBox[{"a_", ",", 
      RowBox[{"-", "b_"}], ",", 
      RowBox[{"-", "c_"}]}], "]"}], ":>", 
    RowBox[{"chrRNExpr", "[", 
     RowBox[{"a", ",", 
      RowBox[{"-", "b"}], ",", 
      RowBox[{"-", "c"}]}], "]"}]}]}]}]], "Input",
 CellLabel->"In[24]:=",ExpressionUUID->"76965ceb-3f7d-4f80-9649-0490a754af11"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Alpha]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Alpha]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Alpha]\[Gamma]", ""],
      DisplayForm]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Beta]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Beta]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Beta]\[Gamma]", ""],
      DisplayForm]}], ")"}]}]}]], "Output",
 CellLabel->
  "Out[24]=",ExpressionUUID->"47a46210-c197-452c-9bc5-35b73721201d"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Of course, the two expressions have the same values.", \
"Item",ExpressionUUID->"27f08bc1-7c99-4c1b-8654-9bf59b678ef8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"MergeTensors", "[", 
    RowBox[{"derivFRN2", "-", "derivFRN"}], "]"}], "//", "TensorValues"}], "//",
   "Simplify"}]], "Input",
 CellLabel->"In[25]:=",ExpressionUUID->"187e68af-44d5-49a6-93be-d3addaa26195"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}]}], 
  "}"}]], "Output",
 CellLabel->
  "Out[25]=",ExpressionUUID->"d74fd868-dcbc-443e-9d8b-869e51c48f16"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dangers in Tensor pattern matching", \
"Section",ExpressionUUID->"e9ed94a6-8efe-4574-be77-62d726ece430"],

Cell["\<\
As always when pattern matching in Mathematica, it is important to keep the \
FullForm of expressions in mind.\
\>", "Item",ExpressionUUID->"c7d798fc-36a7-4664-9629-adaf1ebf6d14"],

Cell["Tensors are simply Sequences of Rules with the Head Tensor.", \
"Item",ExpressionUUID->"09495423-050d-4c95-a5fc-783acce1d74d"],

Cell[TextData[{
 "An important subtlety is that in particular cases, ",
 StyleBox["Tensors can contain other Tensors",
  FontWeight->"Bold"],
 "."
}], "Item",ExpressionUUID->"b1d9b821-9e6f-40f4-84ce-ad1c0c5097ca"],

Cell[CellGroupData[{

Cell["\<\
For instance, the following four-velocity vector contains a Curve and a \
metric.\
\>", "Item",ExpressionUUID->"8058a6a5-4851-4f38-a0e1-cb1b06412836"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uS", "=", 
  RowBox[{"FourVelocityVector", "[", "\"\<SchwGen\>\"", "]"}]}]], "Input",
 CellLabel->"In[26]:=",ExpressionUUID->"56cbb6d8-23f6-4f5f-b62e-3b2da2353393"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[26]=",ExpressionUUID->"06c2b330-5fba-4837-870e-c1b37d6b2669"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Metric", "[", "uS", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Curve", "[", "uS", "]"}]}], "Input",
 CellLabel->"In[27]:=",ExpressionUUID->"afe77ebc-180e-4ca2-9201-14fdc49af5a8"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[27]=",ExpressionUUID->"3b5b97f2-4ee6-41e1-88ec-2d69f56ed2d3"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[28]=",ExpressionUUID->"eec2fcbb-8223-4867-8306-dc29615c6871"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["This is seen directly if we Apply List to our Tensor.", \
"Item",ExpressionUUID->"d6b2fdbf-037f-48fd-a327-90db9baf519e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"List", "@@", "uS"}]], "Input",
 CellLabel->"In[29]:=",ExpressionUUID->"05299735-10b9-45f2-b69a-09e15584a713"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\<\"AbstractQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Coordinates\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"t", ",", "r", ",", "\[Theta]", ",", "\[Phi]"}], "}"}]}], ",", 
   RowBox[{"\<\"Curve\"\>", "\[Rule]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
     DisplayForm]}], ",", 
   RowBox[{"\<\"CurveParameter\"\>", "\[Rule]", "\[Tau]"}], ",", 
   RowBox[{"\<\"CurveQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Dimensions\"\>", "\[Rule]", "4"}], ",", 
   RowBox[{"\<\"DisplayName\"\>", "\[Rule]", "\<\"u\"\>"}], ",", 
   RowBox[{"\<\"Indices\"\>", "\[Rule]", 
    RowBox[{"{", "\[Alpha]", "}"}]}], ",", 
   RowBox[{"\<\"Metric\"\>", "\[Rule]", 
    TagBox[
     SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
     DisplayForm]}], ",", 
   RowBox[{"\<\"MetricQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Name\"\>", 
    "\[Rule]", "\<\"FourVelocityVectorGenericSchwarzschild\"\>"}], ",", 
   RowBox[{"\<\"PossibleIndices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\[Alpha]", ",", "\[Beta]", ",", "\[Gamma]", ",", "\[Delta]", ",", 
      "\[CurlyEpsilon]", ",", "\[Zeta]", ",", "\[Eta]", ",", "\[Iota]", ",", 
      "\[Kappa]", ",", "\[Lambda]", ",", "\[Mu]", ",", "\[Nu]", ",", "\[Xi]", 
      ",", "\[Omicron]", ",", "\[Rho]", ",", "\[Sigma]", ",", "\[FinalSigma]",
       ",", "\[Upsilon]", ",", "\[CurlyPhi]", ",", "\[Psi]", ",", 
      "\[Omega]"}], "}"}]}], ",", 
   RowBox[{"\<\"Tetrad\"\>", "\[Rule]", "Undefined"}], ",", 
   RowBox[{"\<\"Values\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[ScriptCapitalE]", 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", 
      SqrtBox[
       RowBox[{
        SuperscriptBox["\[ScriptCapitalE]", "2"], "-", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "+", 
           FractionBox[
            SuperscriptBox["\[ScriptCapitalL]", "2"], 
            SuperscriptBox[
             RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{"1", "-", 
           FractionBox[
            RowBox[{"2", " ", "M"}], 
            RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}]}]], ",", "0", ",", 
      FractionBox["\[ScriptCapitalL]", 
       SuperscriptBox[
        RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], "}"}]}]}], 
  "}"}]], "Output",
 CellLabel->
  "Out[29]=",ExpressionUUID->"c59b773d-4ebd-4b2a-a647-e5d17861d8a4"]
}, Open  ]]
}, Open  ]],

Cell["\<\
If we aren\[CloseCurlyQuote]t careful, we can change the internals of a \
Tensor.\
\>", "Item",ExpressionUUID->"be657271-e5ce-4349-a3c7-84c100ed59ff"],

Cell[CellGroupData[{

Cell["Here, we define the covariant four-velocity.", \
"Item",ExpressionUUID->"c0e6eb92-6ca7-49c4-86c6-2fe0033aae00"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uSCo", "=", 
  RowBox[{"uS", "[", 
   RowBox[{"-", "\[Alpha]"}], "]"}]}]], "Input",
 CellLabel->"In[30]:=",ExpressionUUID->"1da4609b-4793-4c7a-8bd1-cc8ed776a189"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "\[Alpha]", ""], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[30]=",ExpressionUUID->"522eccde-57c8-42c2-9d62-963154ac3c74"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Then, a careless use of TensorPattern sets the Curve to zero.\
\>", "Item",ExpressionUUID->"211dc3f8-4ab0-45cf-9186-04d0023e3490"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uSCo2", "=", 
  RowBox[{"uSCo", "/.", 
   RowBox[{
    RowBox[{"TensorPattern", "[", 
     RowBox[{"_", ",", 
      RowBox[{"{", "a_Symbol", "}"}]}], "]"}], "\[Rule]", "0"}]}]}]], "Input",
 
 CellLabel->"In[31]:=",ExpressionUUID->"f73f64fa-b98c-46cf-96e2-8838268d08b5"],

Cell[BoxData[
 TemplateBox[{
  "Condition","condp",
   "\"Pattern \\!\\(\\*RowBox[{\\\"a_Symbol\\\"}]\\) appears on the \
right-hand side of condition \\!\\(\\*RowBox[{RowBox[{\\\"{\\\", \\\"a_Symbol\
\\\", \\\"}\\\"}], \\\"/;\\\", RowBox[{RowBox[{\\\"MatchQ\\\", \\\"[\\\", \
RowBox[{RowBox[{\\\"{\\\", \\\"a_Symbol\\\", \\\"}\\\"}], \\\",\\\", RowBox[{\
\\\"{\\\", RowBox[{RowBox[{\\\"Alternatives\\\", \\\"@@\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`posIndPatterns\\\"}], \
\\\"..\\\"}], \\\"}\\\"}]}], \\\"]\\\"}], \\\"&&\\\", RowBox[{\\\"MatchQ\\\", \
\\\"[\\\", RowBox[{\\\"_\\\", \\\",\\\", RowBox[{RowBox[{\\\"Verbatim\\\", \\\
\"[\\\", \\\"_\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_\\\", \\\"|\\\", \
RowBox[{\\\"Verbatim\\\", \\\"[\\\", \\\"_Tensor\\\", \\\"]\\\"}], \\\"|\\\", \
\\\"GeneralRelativityTensors`TensorManipulation`Private`a_Tensor\\\"}]}], \
\\\"]\\\"}]}]}]\\).\"",2,31,4,20233810991004232477,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"33d68e28-b494-47e0-987c-19aa5273f64b"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "\[Alpha]", ""], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[31]=",ExpressionUUID->"1e435615-1bd2-42bc-99cb-afb0e1cecb2a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Curve", "[", "uSCo2", "]"}]], "Input",
 CellLabel->"In[32]:=",ExpressionUUID->"961afae4-3dfc-4eae-8446-6896d1c050ba"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[32]=",ExpressionUUID->"1badd6de-d5de-4533-91fe-88012ded6796"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"List", "@@", "uSCo2"}]], "Input",
 CellLabel->"In[33]:=",ExpressionUUID->"bb97de9d-6ddd-4292-a7b3-79d6ce891533"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\<\"AbstractQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Coordinates\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"t", ",", "r", ",", "\[Theta]", ",", "\[Phi]"}], "}"}]}], ",", 
   RowBox[{"\<\"Curve\"\>", "\[Rule]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
     DisplayForm]}], ",", 
   RowBox[{"\<\"CurveParameter\"\>", "\[Rule]", "\[Tau]"}], ",", 
   RowBox[{"\<\"CurveQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Dimensions\"\>", "\[Rule]", "4"}], ",", 
   RowBox[{"\<\"DisplayName\"\>", "\[Rule]", "\<\"u\"\>"}], ",", 
   RowBox[{"\<\"Indices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"-", "\[Alpha]"}], "}"}]}], ",", 
   RowBox[{"\<\"Metric\"\>", "\[Rule]", 
    TagBox[
     SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
     DisplayForm]}], ",", 
   RowBox[{"\<\"MetricQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Name\"\>", 
    "\[Rule]", "\<\"FourVelocityVectorGenericSchwarzschild\"\>"}], ",", 
   RowBox[{"\<\"PossibleIndices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\[Alpha]", ",", "\[Beta]", ",", "\[Gamma]", ",", "\[Delta]", ",", 
      "\[CurlyEpsilon]", ",", "\[Zeta]", ",", "\[Eta]", ",", "\[Iota]", ",", 
      "\[Kappa]", ",", "\[Lambda]", ",", "\[Mu]", ",", "\[Nu]", ",", "\[Xi]", 
      ",", "\[Omicron]", ",", "\[Rho]", ",", "\[Sigma]", ",", "\[FinalSigma]",
       ",", "\[Upsilon]", ",", "\[CurlyPhi]", ",", "\[Psi]", ",", 
      "\[Omega]"}], "}"}]}], ",", 
   RowBox[{"\<\"Tetrad\"\>", "\[Rule]", "Undefined"}], ",", 
   RowBox[{"\<\"Values\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      FractionBox[
       RowBox[{"\[ScriptCapitalE]", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", 
          FractionBox[
           RowBox[{"2", " ", "M"}], 
           RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}], 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", 
      FractionBox[
       SqrtBox[
        RowBox[{
         SuperscriptBox["\[ScriptCapitalE]", "2"], "-", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"1", "+", 
            FractionBox[
             SuperscriptBox["\[ScriptCapitalL]", "2"], 
             SuperscriptBox[
              RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], ")"}], " ", 
          RowBox[{"(", 
           RowBox[{"1", "-", 
            FractionBox[
             RowBox[{"2", " ", "M"}], 
             RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}]}]], 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", "0", ",", 
      "\[ScriptCapitalL]"}], "}"}]}]}], "}"}]], "Output",
 CellLabel->
  "Out[33]=",ExpressionUUID->"f579f89f-0051-4120-8755-7bb1835c1602"]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellLabel->
  "In[34]:=",ExpressionUUID->"6a21a452-f3e1-42f0-9c38-9bcd5e5a2e1f"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["", "RelatedTutorialsSection",
 WholeCellGroupOpener->True,
 CellFrameLabels->{{
    FEPrivate`If[
     FEPrivate`Or[
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "6.0"], 
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "7.0"], 
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "8.0"]], 
     Cell[
      TextData[
       ButtonBox[
       "RELATED TUTORIALS", BaseStyle -> None, 
        Appearance -> {Automatic, None}, Evaluator -> None, Method -> 
        "Preemptive", ButtonFunction :> (FrontEndExecute[{
           FrontEnd`SelectionMove[
            FrontEnd`SelectedNotebook[], All, ButtonCell], 
           FrontEndToken["OpenCloseGroup"], 
           FrontEnd`SelectionMove[
            FrontEnd`SelectedNotebook[], After, CellContents]}]& )]], 
      "RelatedTutorialsSection"], 
     TextData[
      ButtonBox[
       Cell[
        TextData[{
          Cell[
           BoxData[
            TemplateBox[{24}, "Spacer1"]]], "Related Tutorials"}], 
        "RelatedTutorialsSection"], BaseStyle -> None, 
       Appearance -> {Automatic, None}, Evaluator -> None, Method -> 
       "Preemptive", ButtonFunction :> (FrontEndExecute[{
          FrontEnd`SelectionMove[
           FrontEnd`SelectedNotebook[], All, ButtonCell], 
          FrontEndToken["OpenCloseGroup"], 
          FrontEnd`SelectionMove[
           FrontEnd`SelectedNotebook[], After, CellContents]}]& )]]], None}, {
   None, None}},
 CellFrameLabelMargins->
  0,ExpressionUUID->"acab62a6-c600-4991-a867-3d6b9d0681da"],

Cell[TextData[ButtonBox["Introduction to GeneralRelativityTensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Introduction to \
GeneralRelativityTensors"]], \
"RelatedTutorials",ExpressionUUID->"46153ee6-fe7e-4cc4-a730-283836b1d57a"],

Cell[TextData[ButtonBox["Introduction to Tensor Curves",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Introduction to Tensor Curves"]], \
"RelatedTutorials",ExpressionUUID->"53ac94b0-99e7-4f5a-9a29-ede7be93113f"],

Cell[TextData[ButtonBox["Manipulating and Differentiating Tensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Manipulating and Differentiating \
Tensors"]], \
"RelatedTutorials",ExpressionUUID->"472ce788-a8db-44a7-94a8-a7b39375eaac"],

Cell[TextData[ButtonBox["Built in common Tensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Built in common Tensors"]], \
"RelatedTutorials",ExpressionUUID->"a63bddf7-1138-424e-9dce-7bed404acb36"],

Cell[TextData[ButtonBox["Caching Tensor values",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Caching Tensor values"]], \
"RelatedTutorials",ExpressionUUID->"8aee82ee-2154-4b94-98b5-4d5e74bbe775"],

Cell[TextData[ButtonBox["Examples - Wave equations",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Examples - Wave equations"]], \
"RelatedTutorials",ExpressionUUID->"4ff0c3e1-2f97-4217-b130-c3edd8fa961a"]
}, Open  ]]
}, Open  ]],

Cell[" ", \
"FooterCell",ExpressionUUID->"7079660d-609d-4149-8015-16efb32b4ad9"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{725, 750},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"Pattern matching with Tensors",
Visible->True,
PrivateNotebookOptions->{"FileOutlineCache"->False},
TaggingRules->{
 "ModificationHighlight" -> False, 
  "Metadata" -> {
   "context" -> "GeneralRelativityTensors`", 
    "keywords" -> {
     "Tensors", "GeneralRelativityTensors", "Pattern", "Matching"}, "index" -> 
    True, "label" -> "Pattern matching with Tensors", "language" -> "en", 
    "paclet" -> "Pattern matching with Tensors", "status" -> "None", 
    "summary" -> 
    "Introduction to Pattern matching with the GeneralRelativityTensors \
application.", "synonyms" -> {}, "title" -> "Pattern matching with Tensors", 
    "windowTitle" -> "Pattern matching with Tensors", "type" -> "Tutorial", 
    "uri" -> "GeneralRelativityTensors/tutorial/Pattern matching with \
Tensors", "WorkflowDockedCell" -> ""}, "SearchTextTranslated" -> "", 
  "LinkTrails" -> ""},
TrackCellChangeTimes->False,
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "Reference.nb", 
  CharacterEncoding -> "UTF-8"]
]

