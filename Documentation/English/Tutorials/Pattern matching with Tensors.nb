Notebook[{
Cell[" ", "TutorialColorBar",
 CellMargins->{{Inherited, Inherited}, {-5, 
   0}},ExpressionUUID->"aa630378-0b8b-4812-bfee-c6c181decf26"],

Cell[TextData[{
 ButtonBox["GeneralRelativityTensors",
  BaseStyle->{"Link", "LinkTrail"},
  ButtonData->
   "paclet:GeneralRelativityTensors/guide/GeneralRelativityTensors"],
 StyleBox[" > ", "LinkTrailSeparator"],
 ButtonBox["Pattern matching with Tensors",
  BaseStyle->{"Link", "LinkTrail"},
  ButtonData->
   "paclet:GeneralRelativityTensors/tutorial/Pattern matching with Tensors"]
}], "LinkTrail",ExpressionUUID->"dbbb7dd5-f3e2-42c3-a2d4-1aea63f1b4ff"],

Cell[BoxData[GridBox[{
   {Cell["PATTERN MATCHING WITH TENSORS TUTORIAL", "PacletNameCell",
     ExpressionUUID->"298bf976-4d22-486d-b492-803a93bb2f40"], Cell[TextData[{
     Cell[BoxData[
      ActionMenuBox[
       FrameBox["\<\"Related Tutorials \[RightGuillemet]\"\>",
        StripOnInput->False], {
       RowBox[{"Introduction", " ", "to", " ", "GeneralRelativityTensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Introduction to \
GeneralRelativityTensors"], 
       RowBox[{"Introduction", " ", "to", " ", "Tensor", " ", "Curves"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Introduction to Tensor \
Curves"], 
       RowBox[{
       "Manipulating", " ", "and", " ", "Differentiating", " ", "Tensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Manipulating and \
Differentiating Tensors"], 
       RowBox[{"Built", " ", "in", " ", "common", " ", "Tensors"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Built in common Tensors"], 
       RowBox[{"Caching", " ", "Tensor", " ", "values"}]:>
       Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Caching Tensor values"], 
       RowBox[{"Examples", " ", "-", " ", 
        RowBox[{"Wave", " ", "equations"}]}]:>Documentation`HelpLookup[
       "paclet:GeneralRelativityTensors/tutorial/Examples - Wave equations"]},
       
       Appearance->None,
       MenuAppearance->Automatic]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "b66f44f8-1d96-4560-b310-82d2629ec2c2"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      ActionMenuBox[
       FrameBox["\<\"URL \[RightGuillemet]\"\>",
        StripOnInput->
         False], {"\<\"Go to GeneralRelativityTensors website\"\>":>
       FrontEndExecute[{
         NotebookLocate[{
           URL[None], None}]}], 
       Delimiter, "\<\"Go to wolfram Mathematica website\"\>":>
       FrontEndExecute[{
         NotebookLocate[{
           URL[
           "http://reference.wolfram.com/mathematica/guide/Mathematica.html"],
            None}]}]},
       Appearance->None,
       MenuAppearance->Automatic]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "57d64db3-4c7e-469c-aa49-ab411289f25a"]
    }], "AnchorBar",ExpressionUUID->"44adc13b-641f-4114-996d-6ba314ff2575"]}
  }]], "AnchorBarGrid",ExpressionUUID->"6d84fa1e-4708-4e85-b666-742bb0eeae53"],

Cell[CellGroupData[{

Cell["GeneralRelativityTensors - Pattern matching with Tensors", \
"Title",ExpressionUUID->"28496d6f-edfb-47e2-8da1-0d2defb0f4a2"],

Cell["\<\
Mathematica\[CloseCurlyQuote]s powerful pattern matching can be used with \
GeneralRelativityTensors to replace parts of Tensor expressions.\
\>", "Text",ExpressionUUID->"8d44aae3-9407-408f-b367-2075d887208e"],

Cell[BoxData[
 RowBox[{"<<", "GeneralRelativityTensors`"}]], "Input",
 CellLabel->"In[1]:=",ExpressionUUID->"2561f80a-0846-4553-a408-53f9ee684d8a"],

Cell[CellGroupData[{

Cell["Simple pattern matching of Tensors", \
"Section",ExpressionUUID->"47352705-f348-4c73-b6ef-05438f441ff7"],

Cell["\<\
One of Mathematica\[CloseCurlyQuote]s core strengths is its ability to use \
pattern matching to perform algebraic manipulation.\
\>", "Item",ExpressionUUID->"2829ca45-8d79-493f-b7a8-099a20e88fbe"],

Cell["\<\
At the same time, a serious problems with most common tensor packages is the \
lack of support for patterns.\
\>", "Item",ExpressionUUID->"40ade3a3-9601-4b9a-ac2f-70162dd0a220"],

Cell[CellGroupData[{

Cell["\<\
GeneralRelativityTensors creates tensors the Head Tensor, which we can easily \
match on\
\>", "Item",ExpressionUUID->"b4899af8-bc14-4643-857a-2ad1c17c5848"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"gS", "=", 
  RowBox[{"ToMetric", "[", "\"\<Schwarzschild\>\"", "]"}]}]], "Input",
 CellLabel->"In[2]:=",ExpressionUUID->"b61bf857-4aa9-417f-afe9-791189b70762"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[2]=",ExpressionUUID->"bace0c95-af85-43b0-a88f-78b6cfe6c520"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MatchQ", "[", 
  RowBox[{"gS", ",", "_Tensor"}], "]"}]], "Input",
 CellLabel->"In[3]:=",ExpressionUUID->"67d51a82-c331-4f8c-b464-6de37772b235"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[3]=",ExpressionUUID->"bf3037c9-45cd-424c-ac8b-67a64a884047"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We can use normal pattern matching tricks to get information about Tensors\
\>", "Item",ExpressionUUID->"b318aa45-fc9a-4813-9817-bcd396a1c58e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "=", 
  RowBox[{"BianchiIdentities", "[", 
   RowBox[{"gS", ",", "2"}], "]"}]}]], "Input",
 CellLabel->"In[4]:=",ExpressionUUID->"e471e50d-5dd5-4bde-8b93-0ccae989fe9e"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Gamma]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[4]=",ExpressionUUID->"d748c180-48af-444e-b9fa-5958737fcb19"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{"t_Tensor", "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"Indices", "[", "t", "]"}], "]"}]}]}]], "Input",
 CellLabel->"In[5]:=",ExpressionUUID->"4f82d1c6-aa5b-4c2e-8f85-cdc16c2df4ab"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{"\<\"{-\[Gamma], -\[Alpha], -\[Beta]}\"\>", "-", 
    RowBox[{"\<\"{\[Delta], -\[Alpha], -\[Gamma]}\"\>", 
     " ", "\<\"{-\[Delta], -\[Beta]}\"\>"}], "-", 
    RowBox[{"\<\"{-\[Alpha], -\[Delta]}\"\>", 
     " ", "\<\"{\[Delta], -\[Beta], -\[Gamma]}\"\>"}]}], ")"}]}]], "Output",
 CellLabel->"Out[5]=",ExpressionUUID->"674262fd-6d16-4def-ba2f-7f0745622a06"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Functions like MetricQ and CurveQ allow us to constrain patterns.\
\>", "Item",ExpressionUUID->"9a935e16-394e-41ca-9cdd-d15252acc856"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"t_Tensor", "?", "MetricQ"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"Indices", "[", "t", "]"}], "]"}]}]}]], "Input",
 CellLabel->"In[6]:=",ExpressionUUID->"b75e5c1d-3778-4116-bfd0-75f6de216ed9"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[6]=",ExpressionUUID->"8fcde08b-cd61-4041-b676-ba9fa67c0791"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Matching using TensorPattern", \
"Section",ExpressionUUID->"7e9f2c89-e7a2-45d7-a3d4-a545f0e42c24"],

Cell[CellGroupData[{

Cell["\<\
GeneralRelativityTensors provides this support further pattern support \
through the function TensorPattern\
\>", "Item",ExpressionUUID->"2ebba48e-f211-4e0c-aed7-3aa791dbab59"],

Cell[BoxData[GridBox[{
   {
    RowBox[{
     ButtonBox["TensorPattern",
      BaseStyle->"Link",
      ButtonData->"paclet:GeneralRelativityTensors/ref/TensorPattern"], "[", 
     RowBox[{
      StyleBox["t", "TI"], 
      StyleBox[",", "TI",
       FontSlant->"Plain"], 
      StyleBox["patInds",
       FontFamily->"Times",
       FontWeight->"Regular",
       FontSlant->"Italic"]}], "]"}], Cell[TextData[{
     "returns the Tensor ",
     StyleBox["t",
      FontFamily->"Times",
      FontWeight->"Regular",
      FontSlant->"Italic"],
     " with patterns for indices"
    }], "TableText",ExpressionUUID->"f1d06c95-5425-4876-9ad9-11d73171d65f"]}
  }]], "DefinitionBox",
 CellID->27847004,ExpressionUUID->"250f401b-323c-48eb-aab0-e99696a0a97c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
As a simple example, we can use TensorPattern to extract the indices from a \
Tensor.\
\>", "Item",ExpressionUUID->"74f23c78-fccf-4792-a963-0f3b34637ff1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"TensorPattern", "[", 
    RowBox[{"gS", ",", 
     RowBox[{"{", 
      RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[7]:=",ExpressionUUID->"be18219e-642f-4f0e-8630-546a90fb5101"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[7]=",ExpressionUUID->"576b7354-42a4-4070-b50b-1bb2ff687721"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Alternatively, TensorPattern can be called implicitly with DownValues.\
\>", "Item",ExpressionUUID->"08fdcce0-1c94-4d26-8b01-70f5a78b38b0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"a_", ",", "b_"}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[8]:=",ExpressionUUID->"5deddbfb-de08-44db-9c27-0cafd0a9e109"],

Cell[BoxData[
 RowBox[{"\<\"{\[Alpha], \[Gamma]}\"\>", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[8]=",ExpressionUUID->"95d7b9d8-51d1-42d1-b9c5-868e78519641"]
}, Open  ]]
}, Open  ]],

Cell["\<\
TensorPattern can be called with a Pattern as the first argument so it \
matches more general Tensors.\
\>", "Item",ExpressionUUID->"e708215d-f592-4209-88f9-aa91fe283cab"],

Cell[CellGroupData[{

Cell["Here we match on all rank-2 Tensors.", \
"Item",ExpressionUUID->"d3949109-1c68-41dc-bf14-974c63eec005"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bianS2", "/.", 
  RowBox[{
   RowBox[{"TensorPattern", "[", 
    RowBox[{"_", ",", 
     RowBox[{"{", 
      RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[9]:=",ExpressionUUID->"6bff7dcc-5c35-4cd4-bd08-4c0f302dea0c"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Gamma]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      TagBox[
       SubsuperscriptBox["G", "\[Delta]\[Beta]", ""],
       DisplayForm]}], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "-", 
    RowBox[{
     TagBox[
      SubsuperscriptBox["G", "\[Alpha]\[Delta]", ""],
      DisplayForm], " ", 
     TagBox[
      SubsuperscriptBox["\[CapitalGamma]", 
       RowBox[{"  ", "\[Beta]\[Gamma]"}], 
       RowBox[{"\[Delta]", "    "}]],
      DisplayForm]}], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "G"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->"Out[9]=",ExpressionUUID->"3daffa36-a713-401f-a044-03e9e2513ba9"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Details of pattern matching", \
"Section",ExpressionUUID->"393aab14-3e44-4967-ab0f-4c44e59e06b6"],

Cell[CellGroupData[{

Cell["\<\
A Tensor Pattern is formatted slightly differently from normal Tensors\
\>", "Item",ExpressionUUID->"1b6016dd-6a79-4662-a596-af4350f3649a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TensorPattern", "[", 
  RowBox[{"gS", ",", 
   RowBox[{"{", 
    RowBox[{"a_", ",", "b_"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[10]:=",ExpressionUUID->"9292b43b-a745-4ec2-a751-e8a0d8d4bd46"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "", 
   RowBox[{"a_b", "_"}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[10]=",ExpressionUUID->"07fdbad9-8198-4653-9b99-b45f45dc2536"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Note that these index patterns appear as contravariant, but they will match \
indices in either position, because they are very general patterns.\
\>", "Item",ExpressionUUID->"6b81c29f-0c2a-47bf-a9cf-cd6887047bf6"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"MatchQ", "[", 
  RowBox[{"\[Alpha]", ",", "a_"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatchQ", "[", 
  RowBox[{
   RowBox[{"-", "\[Alpha]"}], ",", "a_"}], "]"}]}], "Input",
 CellLabel->"In[11]:=",ExpressionUUID->"35953cd2-ec8c-4075-b397-987d7133d4e9"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[11]=",ExpressionUUID->"0d449940-074b-40a8-9c7b-c8a6f5e1b12c"],

Cell[BoxData["True"], "Output",
 CellLabel->
  "Out[12]=",ExpressionUUID->"647862fc-af1e-41c3-b846-7d47d4ee819f"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We can put a more stringent constraint on the indices, by using more \
restrictive patterns.\
\>", "Item",ExpressionUUID->"b3d363fe-d345-43f2-9a78-1f5a82c0106d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"gS", "[", 
  RowBox[{"a_Symbol", ",", 
   RowBox[{"-", "b_Symbol"}]}], "]"}]], "Input",
 CellLabel->"In[13]:=",ExpressionUUID->"5b180b9b-8449-407e-abc2-4c21597ee64a"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", 
   RowBox[{"                ", "b_Symbol"}], 
   RowBox[{"a_Symbol", "                "}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[13]=",ExpressionUUID->"339bd831-6317-4796-bde1-78174b7d80f7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expr", "=", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"\[Alpha]", ",", "\[Beta]"}], "]"}], 
   RowBox[{"gS", "[", 
    RowBox[{
     RowBox[{"-", "\[Gamma]"}], ",", 
     RowBox[{"-", "\[Delta]"}]}], "]"}], 
   RowBox[{"gS", "[", 
    RowBox[{"\[Mu]", ",", 
     RowBox[{"-", "\[Nu]"}]}], "]"}]}]}]], "Input",
 CellLabel->"In[14]:=",ExpressionUUID->"7f76e784-7cda-47f9-85f4-a11fcc992728"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Beta]"],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", "\[Gamma]\[Delta]", ""],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", 
    RowBox[{"  ", "\[Nu]"}], 
    RowBox[{"\[Mu]", "  "}]],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[14]=",ExpressionUUID->"44404da6-6b91-4b3b-b37b-6c0b91b389d5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expr", "/.", 
  RowBox[{
   RowBox[{"gS", "[", 
    RowBox[{"a_Symbol", ",", 
     RowBox[{"-", "b_Symbol"}]}], "]"}], "\[RuleDelayed]", 
   RowBox[{"ToString", "[", 
    RowBox[{"{", 
     RowBox[{"a", ",", "b"}], "}"}], "]"}]}]}]], "Input",
 CellLabel->"In[15]:=",ExpressionUUID->"1a3c5877-cb58-4c20-ab03-9f01f77ce067"],

Cell[BoxData[
 RowBox[{"\<\"{\[Mu], \[Nu]}\"\>", " ", 
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Beta]"],
   DisplayForm], " ", 
  TagBox[
   SubsuperscriptBox["g", "\[Gamma]\[Delta]", ""],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[15]=",ExpressionUUID->"4a4362e4-67ee-4c72-bd78-565a2be8dade"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Using pattern matching on larger expressions", \
"Section",ExpressionUUID->"3942508f-79f0-4ba5-883b-40128c1253d4"],

Cell[CellGroupData[{

Cell["The field strength for the Reissner-Nordstr\[ODoubleDot]m spacetime \
is:", "Item",ExpressionUUID->"187bc98c-f9c0-4dbc-ab29-6fb76b599b3c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"FRN", "=", 
  RowBox[{"FieldStrengthTensor", "[", "\"\<RN\>\"", "]"}]}]], "Input",
 CellLabel->"In[16]:=",ExpressionUUID->"2aef8b8e-9a9e-4058-9cd7-e00762586eb6"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["F", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->
  "Out[16]=",ExpressionUUID->"f97a2699-6b7a-42df-9407-60f768b55555"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Its covariant derivative is:", \
"Item",ExpressionUUID->"4283a78b-3349-440e-9913-0ade05cc1f52"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "=", 
  RowBox[{"CovariantD", "[", 
   RowBox[{"FRN", ",", 
    RowBox[{"-", "\[Gamma]"}]}], "]"}]}]], "Input",
 CellLabel->"In[17]:=",ExpressionUUID->"de27c8fe-2f72-4aa9-a19d-91077e981ba4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"-", 
    TagBox[
     SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
     DisplayForm]}], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Alpha]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "-", 
  RowBox[{
   TagBox[
    SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Beta]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "+", 
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm]}]], "Output",
 CellLabel->
  "Out[17]=",ExpressionUUID->"1e5f4c83-64cb-48b6-b649-b26688634748"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
The metric and Christoffel symbols associated with that derivative are:\
\>", "Item",ExpressionUUID->"7dab7819-7e83-4362-95da-5fac01fdc171"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"gRN", "=", 
  RowBox[{"ToMetric", "[", "\"\<RN\>\"", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"chrRN", "=", 
  RowBox[{"ChristoffelSymbol", "[", "gRN", "]"}]}]}], "Input",
 CellLabel->"In[18]:=",ExpressionUUID->"8b272381-b406-4307-8c0b-33cb80f2cda5"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[18]=",ExpressionUUID->"33950b68-133d-4313-8a35-fd35c1316f6a"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["\[CapitalGamma]", 
   RowBox[{"  ", "\[Beta]\[Gamma]"}], 
   RowBox[{"\[Alpha]", "    "}]],
  DisplayForm]], "Output",
 CellLabel->
  "Out[19]=",ExpressionUUID->"b86c7601-51b8-41f7-96a2-ade5b7664456"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Now we can use pattern matching to set some terms to zero.", \
"Item",ExpressionUUID->"112d589e-8716-4856-b093-3c2ebd3b9bcd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "/.", 
  RowBox[{
   RowBox[{"chrRN", "[", "__", "]"}], "\[RuleDelayed]", "0"}]}]], "Input",
 CellLabel->"In[20]:=",ExpressionUUID->"5e68109d-e64a-4b78-afd8-0482773f0426"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox[
   RowBox[{"(", 
    RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->
  "Out[20]=",ExpressionUUID->"304e9191-e6bd-43c0-8c14-be9bcd8f56a7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Suppose we wish to replace the Christoffel symbols with an expression \
involving the metric.\
\>", "Item",ExpressionUUID->"e631fc45-fecc-4de5-9049-ac3193ee6ff4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"chrRNExpr", "[", 
   RowBox[{"a_", ",", 
    RowBox[{"-", "b_"}], ",", 
    RowBox[{"-", "c_"}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{"1", "/", "2"}], " ", 
   RowBox[{"gRN", "[", 
    RowBox[{"a", ",", "\[Mu]"}], "]"}], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "\[Mu]"}], ",", 
         RowBox[{"-", "b"}]}], "]"}], ",", 
       RowBox[{"-", "c"}]}], "]"}], "+", 
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "\[Mu]"}], ",", 
         RowBox[{"-", "c"}]}], "]"}], ",", 
       RowBox[{"-", "b"}]}], "]"}], "-", 
     RowBox[{"D", "[", 
      RowBox[{
       RowBox[{"gRN", "[", 
        RowBox[{
         RowBox[{"-", "b"}], ",", 
         RowBox[{"-", "c"}]}], "]"}], ",", 
       RowBox[{"-", "\[Mu]"}]}], "]"}]}], ")"}]}]}]], "Input",
 CellLabel->"In[21]:=",ExpressionUUID->"8addd0ef-eb78-4f56-96e6-4986af12e153"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"chrRNExpr", "[", 
  RowBox[{"\[Alpha]", ",", 
   RowBox[{"-", "\[Beta]"}], ",", 
   RowBox[{"-", "\[Gamma]"}]}], "]"}]], "Input",
 CellLabel->"In[22]:=",ExpressionUUID->"d7bdff3c-ea12-4439-a462-e315cd36b0b0"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  TagBox[
   SubsuperscriptBox["g", "", "\[Alpha]\[Mu]"],
   DisplayForm], " ", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Beta]\[Mu]\[Gamma]", ""],
     DisplayForm], "+", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Beta]", ""],
     DisplayForm], "-", 
    TagBox[
     SubsuperscriptBox[
      RowBox[{"(", 
       RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Beta]\[Gamma]", ""],
     DisplayForm]}], ")"}]}]], "Output",
 CellLabel->
  "Out[22]=",ExpressionUUID->"e0451b61-b662-44fd-84f1-a8ce5dcdf2e9"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["We can replace one of the Christoffel symbol easily.", \
"Item",ExpressionUUID->"f771d744-6fe4-4e53-a693-dee3537d985b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN", "/.", 
  RowBox[{
   RowBox[{"chrRN", "[", 
    RowBox[{"\[Delta]", ",", 
     RowBox[{"-", "\[Alpha]"}], ",", 
     RowBox[{"-", "\[Gamma]"}]}], "]"}], "->", 
   RowBox[{"chrRNExpr", "[", 
    RowBox[{"\[Delta]", ",", 
     RowBox[{"-", "\[Alpha]"}], ",", 
     RowBox[{"-", "\[Gamma]"}]}], "]"}]}]}]], "Input",
 CellLabel->"In[23]:=",ExpressionUUID->"6996da8e-759c-407b-a671-f5695946e6f3"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"-", 
    TagBox[
     SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
     DisplayForm]}], " ", 
   TagBox[
    SubsuperscriptBox["\[CapitalGamma]", 
     RowBox[{"  ", "\[Beta]\[Gamma]"}], 
     RowBox[{"\[Delta]", "    "}]],
    DisplayForm]}], "+", 
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Alpha]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Alpha]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Alpha]\[Gamma]", ""],
      DisplayForm]}], ")"}]}]}]], "Output",
 CellLabel->
  "Out[23]=",ExpressionUUID->"1506c4e6-9ce4-432b-89cb-614694ea1aff"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["However, with patterns we can replace both symbols at once.", \
"Item",ExpressionUUID->"aa244b88-7282-4215-a87f-9f7912c22a95"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"derivFRN2", "=", 
  RowBox[{"derivFRN", "/.", 
   RowBox[{
    RowBox[{"chrRN", "[", 
     RowBox[{"a_", ",", 
      RowBox[{"-", "b_"}], ",", 
      RowBox[{"-", "c_"}]}], "]"}], ":>", 
    RowBox[{"chrRNExpr", "[", 
     RowBox[{"a", ",", 
      RowBox[{"-", "b"}], ",", 
      RowBox[{"-", "c"}]}], "]"}]}]}]}]], "Input",
 CellLabel->"In[24]:=",ExpressionUUID->"b07a75d0-cf59-493a-9ba8-db7bc1f98ee6"],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubsuperscriptBox[
    RowBox[{"(", 
     RowBox[{"\[PartialD]", "F"}], ")"}], "\[Gamma]\[Alpha]\[Beta]", ""],
   DisplayForm], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Delta]\[Beta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Alpha]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Alpha]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Alpha]\[Gamma]", ""],
      DisplayForm]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   TagBox[
    SubsuperscriptBox["F", "\[Alpha]\[Delta]", ""],
    DisplayForm], " ", 
   TagBox[
    SubsuperscriptBox["g", "", "\[Delta]\[Mu]"],
    DisplayForm], " ", 
   RowBox[{"(", 
    RowBox[{
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Beta]\[Mu]\[Gamma]", ""],
      DisplayForm], "+", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Gamma]\[Mu]\[Beta]", ""],
      DisplayForm], "-", 
     TagBox[
      SubsuperscriptBox[
       RowBox[{"(", 
        RowBox[{"\[PartialD]", "g"}], ")"}], "\[Mu]\[Beta]\[Gamma]", ""],
      DisplayForm]}], ")"}]}]}]], "Output",
 CellLabel->
  "Out[24]=",ExpressionUUID->"3402da42-96fd-476a-840d-81ecc2b79560"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Of course, the two expressions have the same values.", \
"Item",ExpressionUUID->"ffb97a4f-03b7-4ca9-8ddc-f1669668c9ba"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"MergeTensors", "[", 
    RowBox[{"derivFRN2", "-", "derivFRN"}], "]"}], "//", "TensorValues"}], "//",
   "Simplify"}]], "Input",
 CellLabel->"In[25]:=",ExpressionUUID->"c46ecb17-3945-4f8c-88b6-e58b9ff2e2c5"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], "}"}]}], 
  "}"}]], "Output",
 CellLabel->
  "Out[25]=",ExpressionUUID->"2b5f7c57-dd08-4552-88e4-68ffed49a192"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dangers in Tensor pattern matching", \
"Section",ExpressionUUID->"4a909020-74c7-481a-a08d-91d8a812f7f4"],

Cell["\<\
As always when pattern matching in Mathematica, it is important to keep the \
FullForm of expressions in mind.\
\>", "Item",ExpressionUUID->"80594d7d-2f0d-4945-bd99-b41467f6bd3a"],

Cell["Tensors are simply Sequences of Rules with the Head Tensor.", \
"Item",ExpressionUUID->"5ffac096-f224-4611-910a-cf026276dda7"],

Cell[TextData[{
 "An important subtlety is that in particular cases, ",
 StyleBox["Tensors can contain other Tensors",
  FontWeight->"Bold"],
 "."
}], "Item",ExpressionUUID->"5a552efa-8e72-4b8a-9b61-264c70b93b17"],

Cell[CellGroupData[{

Cell["\<\
For instance, the following four-velocity vector contains a Curve and a \
metric.\
\>", "Item",ExpressionUUID->"729b61cf-2d4f-42e7-802e-979386fbfa5a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uS", "=", 
  RowBox[{"FourVelocityVector", "[", "\"\<SchwGen\>\"", "]"}]}]], "Input",
 CellLabel->"In[26]:=",ExpressionUUID->"11cfc00c-a7d5-4cd9-a586-c705467fbe4d"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[26]=",ExpressionUUID->"5bfa6d90-b24a-4498-8487-cb9ff63330b4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Metric", "[", "uS", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Curve", "[", "uS", "]"}]}], "Input",
 CellLabel->"In[27]:=",ExpressionUUID->"afc0d2ce-721d-496c-971d-21ee16b659b8"],

Cell[BoxData[
 TagBox[
  SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
  DisplayForm]], "Output",
 CellLabel->"Out[27]=",ExpressionUUID->"65145fd8-6189-4e67-b7e1-b7875133cfb8"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[28]=",ExpressionUUID->"22e0668b-7d56-4356-8f9b-46e5d855ed8c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["This is seen directly if we Apply List to our Tensor.", \
"Item",ExpressionUUID->"f8199798-d173-4fcf-8637-c57c740131f3"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"List", "@@", "uS"}]], "Input",
 CellLabel->"In[29]:=",ExpressionUUID->"5b49b6c2-2118-4deb-9cee-05d51055fe83"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\<\"AbstractQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Coordinates\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"t", ",", "r", ",", "\[Theta]", ",", "\[Phi]"}], "}"}]}], ",", 
   RowBox[{"\<\"Curve\"\>", "\[Rule]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
     DisplayForm]}], ",", 
   RowBox[{"\<\"CurveParameter\"\>", "\[Rule]", "\[Tau]"}], ",", 
   RowBox[{"\<\"CurveQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Dimensions\"\>", "\[Rule]", "4"}], ",", 
   RowBox[{"\<\"DisplayName\"\>", "\[Rule]", "\<\"u\"\>"}], ",", 
   RowBox[{"\<\"Indices\"\>", "\[Rule]", 
    RowBox[{"{", "\[Alpha]", "}"}]}], ",", 
   RowBox[{"\<\"Metric\"\>", "\[Rule]", 
    TagBox[
     SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
     DisplayForm]}], ",", 
   RowBox[{"\<\"MetricQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Name\"\>", 
    "\[Rule]", "\<\"FourVelocityVectorGenericSchwarzschild\"\>"}], ",", 
   RowBox[{"\<\"PossibleIndices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\[Alpha]", ",", "\[Beta]", ",", "\[Gamma]", ",", "\[Delta]", ",", 
      "\[CurlyEpsilon]", ",", "\[Zeta]", ",", "\[Eta]", ",", "\[Iota]", ",", 
      "\[Kappa]", ",", "\[Lambda]", ",", "\[Mu]", ",", "\[Nu]", ",", "\[Xi]", 
      ",", "\[Omicron]", ",", "\[Rho]", ",", "\[Sigma]", ",", "\[FinalSigma]",
       ",", "\[Upsilon]", ",", "\[CurlyPhi]", ",", "\[Psi]", ",", 
      "\[Omega]"}], "}"}]}], ",", 
   RowBox[{"\<\"Values\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[ScriptCapitalE]", 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", 
      SqrtBox[
       RowBox[{
        SuperscriptBox["\[ScriptCapitalE]", "2"], "-", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "+", 
           FractionBox[
            SuperscriptBox["\[ScriptCapitalJ]", "2"], 
            SuperscriptBox[
             RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{"1", "-", 
           FractionBox[
            RowBox[{"2", " ", "M"}], 
            RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}]}]], ",", "0", ",", 
      FractionBox["\[ScriptCapitalJ]", 
       SuperscriptBox[
        RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], "}"}]}]}], 
  "}"}]], "Output",
 CellLabel->
  "Out[29]=",ExpressionUUID->"e6228505-f283-4dcd-bbef-26a50e68800f"]
}, Open  ]]
}, Open  ]],

Cell["\<\
If we aren\[CloseCurlyQuote]t careful, we can change the internals of a \
Tensor.\
\>", "Item",ExpressionUUID->"6c16b4d5-8e7a-4de1-b14e-9bc81f0a5400"],

Cell[CellGroupData[{

Cell["Here, we define the covariant four-velocity.", \
"Item",ExpressionUUID->"588d77d2-a255-4b79-91b6-da7455b289ed"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uSCo", "=", 
  RowBox[{"uS", "[", 
   RowBox[{"-", "\[Alpha]"}], "]"}]}]], "Input",
 CellLabel->"In[30]:=",ExpressionUUID->"947e9402-62ee-461e-97e7-773d0a6a055b"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "\[Alpha]", ""], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[30]=",ExpressionUUID->"6682ece2-e122-4217-bd74-c9b0c483361e"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Then, a careless use of TensorPattern sets the Curve to zero.\
\>", "Item",ExpressionUUID->"90ba9b75-764d-441c-ace7-7ae2bf7718b8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"uSCo2", "=", 
  RowBox[{"uSCo", "/.", 
   RowBox[{
    RowBox[{"TensorPattern", "[", 
     RowBox[{"_", ",", 
      RowBox[{"{", "a_Symbol", "}"}]}], "]"}], "\[Rule]", "0"}]}]}]], "Input",
 
 CellLabel->"In[31]:=",ExpressionUUID->"bf60f51e-42c1-4f9b-99f8-da259648a769"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["u", "\[Alpha]", ""], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[31]=",ExpressionUUID->"a5eaf803-76ca-448b-ab2b-ade2d3bfa635"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Curve", "[", "uSCo2", "]"}]], "Input",
 CellLabel->"In[32]:=",ExpressionUUID->"4eafbc7b-9b37-4b06-b7e4-1ebd0e333316"],

Cell[BoxData[
 TagBox[
  RowBox[{
   SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
  DisplayForm]], "Output",
 CellLabel->
  "Out[32]=",ExpressionUUID->"bef89726-3e5e-440d-b9cf-ed9d9e78016c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"List", "@@", "uSCo2"}]], "Input",
 CellLabel->"In[33]:=",ExpressionUUID->"0eddb137-43fa-4cfb-bb42-27dd1d489603"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\<\"AbstractQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Coordinates\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"t", ",", "r", ",", "\[Theta]", ",", "\[Phi]"}], "}"}]}], ",", 
   RowBox[{"\<\"Curve\"\>", "\[Rule]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["x", "", "\[Alpha]"], "[", "\<\"\[Tau]\"\>", "]"}],
     DisplayForm]}], ",", 
   RowBox[{"\<\"CurveParameter\"\>", "\[Rule]", "\[Tau]"}], ",", 
   RowBox[{"\<\"CurveQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Dimensions\"\>", "\[Rule]", "4"}], ",", 
   RowBox[{"\<\"DisplayName\"\>", "\[Rule]", "\<\"u\"\>"}], ",", 
   RowBox[{"\<\"Indices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"-", "\[Alpha]"}], "}"}]}], ",", 
   RowBox[{"\<\"Metric\"\>", "\[Rule]", 
    TagBox[
     SubsuperscriptBox["g", "\[Alpha]\[Beta]", ""],
     DisplayForm]}], ",", 
   RowBox[{"\<\"MetricQ\"\>", "\[Rule]", "False"}], ",", 
   RowBox[{"\<\"Name\"\>", 
    "\[Rule]", "\<\"FourVelocityVectorGenericSchwarzschild\"\>"}], ",", 
   RowBox[{"\<\"PossibleIndices\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\[Alpha]", ",", "\[Beta]", ",", "\[Gamma]", ",", "\[Delta]", ",", 
      "\[CurlyEpsilon]", ",", "\[Zeta]", ",", "\[Eta]", ",", "\[Iota]", ",", 
      "\[Kappa]", ",", "\[Lambda]", ",", "\[Mu]", ",", "\[Nu]", ",", "\[Xi]", 
      ",", "\[Omicron]", ",", "\[Rho]", ",", "\[Sigma]", ",", "\[FinalSigma]",
       ",", "\[Upsilon]", ",", "\[CurlyPhi]", ",", "\[Psi]", ",", 
      "\[Omega]"}], "}"}]}], ",", 
   RowBox[{"\<\"Values\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      FractionBox[
       RowBox[{"\[ScriptCapitalE]", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", 
          FractionBox[
           RowBox[{"2", " ", "M"}], 
           RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}], 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", 
      FractionBox[
       SqrtBox[
        RowBox[{
         SuperscriptBox["\[ScriptCapitalE]", "2"], "-", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"1", "+", 
            FractionBox[
             SuperscriptBox["\[ScriptCapitalJ]", "2"], 
             SuperscriptBox[
              RowBox[{"r", "[", "\[Tau]", "]"}], "2"]]}], ")"}], " ", 
          RowBox[{"(", 
           RowBox[{"1", "-", 
            FractionBox[
             RowBox[{"2", " ", "M"}], 
             RowBox[{"r", "[", "\[Tau]", "]"}]]}], ")"}]}]}]], 
       RowBox[{"1", "-", 
        FractionBox[
         RowBox[{"2", " ", "M"}], 
         RowBox[{"r", "[", "\[Tau]", "]"}]]}]], ",", "0", ",", 
      "\[ScriptCapitalJ]"}], "}"}]}]}], "}"}]], "Output",
 CellLabel->
  "Out[33]=",ExpressionUUID->"82a889ab-8763-480c-8aca-416625ace34d"]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellLabel->
  "In[34]:=",ExpressionUUID->"277bd053-3727-4414-ae93-e83bf84d3757"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["", "RelatedTutorialsSection",
 WholeCellGroupOpener->True,
 CellFrameLabels->{{
    FEPrivate`If[
     FEPrivate`Or[
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "6.0"], 
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "7.0"], 
      FEPrivate`SameQ[FEPrivate`$ProductVersion, "8.0"]], 
     Cell[
      TextData[
       ButtonBox[
       "RELATED TUTORIALS", BaseStyle -> None, 
        Appearance -> {Automatic, None}, Evaluator -> None, Method -> 
        "Preemptive", ButtonFunction :> (FrontEndExecute[{
           FrontEnd`SelectionMove[
            FrontEnd`SelectedNotebook[], All, ButtonCell], 
           FrontEndToken["OpenCloseGroup"], 
           FrontEnd`SelectionMove[
            FrontEnd`SelectedNotebook[], After, CellContents]}]& )]], 
      "RelatedTutorialsSection"], 
     TextData[
      ButtonBox[
       Cell[
        TextData[{
          Cell[
           BoxData[
            TemplateBox[{24}, "Spacer1"]]], "Related Tutorials"}], 
        "RelatedTutorialsSection"], BaseStyle -> None, 
       Appearance -> {Automatic, None}, Evaluator -> None, Method -> 
       "Preemptive", ButtonFunction :> (FrontEndExecute[{
          FrontEnd`SelectionMove[
           FrontEnd`SelectedNotebook[], All, ButtonCell], 
          FrontEndToken["OpenCloseGroup"], 
          FrontEnd`SelectionMove[
           FrontEnd`SelectedNotebook[], After, CellContents]}]& )]]], None}, {
   None, None}},
 CellFrameLabelMargins->
  0,ExpressionUUID->"41e9cc44-702b-41a2-baa1-4970734ad9f6"],

Cell[TextData[ButtonBox["Introduction to GeneralRelativityTensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Introduction to \
GeneralRelativityTensors"]], \
"RelatedTutorials",ExpressionUUID->"9a93b226-b0aa-476e-8fd3-50cb3f65f03f"],

Cell[TextData[ButtonBox["Introduction to Tensor Curves",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Introduction to Tensor Curves"]], \
"RelatedTutorials",ExpressionUUID->"8d2da959-2255-4dc9-9728-f5dab23caa59"],

Cell[TextData[ButtonBox["Manipulating and Differentiating Tensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Manipulating and Differentiating \
Tensors"]], \
"RelatedTutorials",ExpressionUUID->"ab7dcd2d-3ba0-40df-9b0f-b78e94a98a53"],

Cell[TextData[ButtonBox["Built in common Tensors",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Built in common Tensors"]], \
"RelatedTutorials",ExpressionUUID->"2e5999c0-f883-4d50-a2ac-737d3f240eed"],

Cell[TextData[ButtonBox["Caching Tensor values",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Caching Tensor values"]], \
"RelatedTutorials",ExpressionUUID->"f292b16a-d87f-4d43-aa7f-b0bdb42ee940"],

Cell[TextData[ButtonBox["Examples - Wave equations",
 BaseStyle->"Link",
 ButtonData->
  "paclet:GeneralRelativityTensors/tutorial/Examples - Wave equations"]], \
"RelatedTutorials",ExpressionUUID->"60ac42c6-a15e-4d02-8203-acf4fb0249d7"]
}, Open  ]]
}, Open  ]],

Cell[" ", \
"FooterCell",ExpressionUUID->"c1f98808-041a-4c04-8ca4-81e7c27905ab"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{725, 750},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"Pattern matching with Tensors",
Visible->True,
PrivateNotebookOptions->{"FileOutlineCache"->False},
TaggingRules->{
 "ModificationHighlight" -> False, 
  "Metadata" -> {
   "context" -> "GeneralRelativityTensors`", 
    "keywords" -> {
     "Tensors", "GeneralRelativityTensors", "Pattern", "Matching"}, "index" -> 
    True, "label" -> "Pattern matching with Tensors", "language" -> "en", 
    "paclet" -> "Pattern matching with Tensors", "status" -> "None", 
    "summary" -> 
    "Introduction to Pattern matching with the GeneralRelativityTensors \
application.", "synonyms" -> {}, "title" -> "Pattern matching with Tensors", 
    "windowTitle" -> "Pattern matching with Tensors", "type" -> "Tutorial", 
    "uri" -> "GeneralRelativityTensors/tutorial/Pattern matching with \
Tensors", "WorkflowDockedCell" -> ""}, "SearchTextTranslated" -> "", 
  "LinkTrails" -> ""},
TrackCellChangeTimes->False,
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "Reference.nb", 
  CharacterEncoding -> "UTF-8"]
]

